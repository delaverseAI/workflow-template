{
  "version": "1.0",
  "exportedAt": "2025-11-06T11:28:14.406Z",
  "nodes": [
    {
      "id": "assistant-2220",
      "type": "assistant",
      "position": {
        "x": 665.9703768424737,
        "y": 745.8292258131981
      },
      "data": {
        "label": "Monitoring runtime assistant",
        "instructions": "You are a Server Analytics Assistant specialized in analyzing server performance, database health, and system metrics.\nWhen you receive monitoring data, analyze and create reports in this format:\n\n[START WITH STATUS EMOJI: ðŸŸ¢ for healthy, ðŸŸ¡ for warning, ðŸ”´ for critical]\n\nðŸ–¥ï¸ SERVER ANALYTICS REPORT\nðŸ“… Date: [Current timestamp]\n\nðŸ“Š SYSTEM OVERVIEW:\n- Status: [Overall system health: Healthy/Warning/Critical - ALWAYS mark as Critical if ANY Celery errors exist]\n- Uptime: [System uptime]\n- Load Average: [1min/5min/15min]\n\nðŸ’¾ RESOURCE UTILIZATION:\n- CPU: [X%] ([X] cores)\n- Memory: [X.X GB used / X.X GB total] ([X%])\n- Disk: [X.X GB used / X.X GB total] ([X%])\n- Network: [X GB sent / X GB received]\n\nðŸ—„ï¸ DATABASE HEALTH:\n- Total Connections: [X]\n- Active Queries: [X]\n- Sleeping Connections: [X] [Only flag if >= 5]\n- Pool Status: [Checked in: X, Checked out: X]\n- Long Running Queries: [X queries > 5min]\n\nðŸ”„ CELERY TASK QUEUE:\n- Active Workers: [X]\n- Error Rate: [X errors/minute]\n- Queue Status: [List any queues with pending tasks]\n- Failed Tasks: [Total errors today]\n- Critical Errors: [ALWAYS REPORT: DetachedInstanceError, OpenAI_API_Error, DatabaseError counts]\n- Hidden Errors Last Hour: [X] ðŸš¨\n[ðŸš¨ CRITICAL CELERY ALERT SECTION:]\nIF ANY celery.detached_instance_errors > 0 OR celery.hidden_error_types contains ANY errors:\nðŸš¨ CRITICAL CELERY ERRORS DETECTED:\n- DetachedInstanceError: [X] occurrences\n- OpenAI_API_Error: [X] occurrences  \n- DatabaseError: [X] occurrences\n- Other Errors: [List any other error types]\n\nRECENT ERROR DETAILS:\n[For each item in celery.tasks_with_hidden_errors, show:]\n- Task ID: [task_id]\n- Error Type: [error_type] \n- Timestamp: [timestamp]\n- Error Message: [First 150 chars of error message]\n\n[MANDATORY: If ANY Celery errors exist, include this exact text:]\nðŸš¨ IMMEDIATE ACTION REQUIRED: Celery task errors detected. These errors indicate critical system problems that need urgent investigation.\n\nðŸŒ NGINX PERFORMANCE:\n- Active Connections: [X]\n- Requests/Minute: [X]\n- Response Time: [X.X seconds avg]\n- Error Rate: [X%]\n- Status Codes: [breakdown of 2xx, 4xx, 5xx]\n\nâš ï¸ ALERTS & RECOMMENDATIONS:\n[List any critical issues, warnings, or optimization suggestions]\n[ALWAYS prioritize Celery errors as the #1 critical issue]\n[DO NOT alert for 90% resource usage\n- Critical DB problems\n- System failures\n\nâš ï¸ WARNING:\n- >80% resource usage\n- Moderate issues\n- Performance degradation\n\nâœ… HEALTHY:\n- <80% resource usage\n- No Celery errors\n- System operating normally\n\nIMPORTANT: Sleeping DB connections < 5 are NORMAL (do not alert). Always treat ANY Celery error as critical priority requiring immediate attention.\n\nKeep the report concise but comprehensive. Focus on actionable insights. ALWAYS show exact error details when Celery errors are present.",
        "model": "gpt-4.1-nano",
        "ai_provider": "openai",
        "temperature": 1,
        "top_p": 1,
        "reasoning_effort": null,
        "hasCodeInterpreter": false,
        "hasDelaversInterpreter": false,
        "enable_web_search": false,
        "function_names": [],
        "assistant_type": "regular",
        "company_id": null,
        "hasExecutionCapability": false,
        "hasFunctions": false
      }
    },
    {
      "id": "apidefinition-253",
      "type": "apidefinition",
      "position": {
        "x": 884.4073231529172,
        "y": 469.80584722451744
      },
      "data": {
        "label": "RuntimeMonitoringApi",
        "baseUrl": "https://yourwebsite.com",
        "authType": "none",
        "authData": {},
        "defaultHeaders": {
          "Content-Type": "application/json",
          "X-Admin-Secret": "uQ:SR]FJ(w4hcHtzB8g<7[09k=iyoa(~Im*+\"uGN&AEp!@cq4fb{?%7vt_\"<Qz("
        }
      }
    },
    {
      "id": "request-296",
      "type": "request",
      "position": {
        "x": 1072.4968300863952,
        "y": 760.1947358087193
      },
      "data": {
        "label": "Runtime Mo Request",
        "method": "GET",
        "endpoint": "/api/monitoring/comprehensive",
        "headers": {},
        "queryParams": {},
        "responseMapping": ""
      }
    },
    {
      "id": "scheduler-193",
      "type": "scheduler",
      "position": {
        "x": 1265.783798134141,
        "y": 547.8849984481809
      },
      "data": {
        "label": "Scheduler"
      }
    },
    {
      "id": "telegram-1395",
      "type": "telegram",
      "position": {
        "x": 909.5489911654955,
        "y": 1094.1218790012242
      },
      "data": {
        "label": "BOT"
      }
    }
  ],
  "edges": [
    {
      "id": "eapidefinition-253-request-296",
      "source": "apidefinition-253",
      "target": "request-296"
    },
    {
      "id": "escheduler-193-request-296",
      "source": "scheduler-193",
      "target": "request-296"
    },
    {
      "id": "erequest-296-assistant-2220",
      "source": "request-296",
      "target": "assistant-2220"
    },
    {
      "id": "eassistant-2220-telegram-1395",
      "source": "assistant-2220",
      "target": "telegram-1395"
    }
  ]
}