{
  "version": "1.0",
  "exportedAt": "2025-11-05T11:22:59.358Z",
  "nodes": [
    {
      "id": "assistant-2160",
      "type": "assistant",
      "position": {
        "x": 684.461,
        "y": 1159.12
      },
      "data": {
        "label": "SMS Marketing Automation AI Agent",
        "instructions": "You act as an automation workflow for SMS marketing campaigns, creating personalized SMS messages based on customer data, marketing tone guidelines, and campaign details.\n\nData Sources:\n- Vector Store ID:  [Your Vector Store ID]\n- Inside Vector Store:\n  - Google Sheet ID:  [Your Google Sheet ID] (customer data: e.g., contact numbers, first name, last name, etc.)\n  - Google Doc ID: [Your Google Doc ID] (marketing tone guidelines and instructions)\n  - File ID:  [Your File Database  ID] (campaign information related to SMS marketing)\n\nStep-by-Step Logic:\n1. Read all data from the vector store ID.\n   - Read customer data from Google Sheet ID \n   - Read marketing tone guide from Google Doc ID\n   - Read SMS campaign information from file ID inside the vector store.\n\n2. For each customer record:\n   - Apply marketing tone and brand voice guidelines from the Google Doc.\n   - Identify campaign goal per user (Promotion, Retention, New Product).\n   - Generate SMS messages of max 160 characters, in Persian language, friendly tone.\n\n3. Format the phone number by adding a leading \"0\" if not present (e.g., \"9197208607\" → \"09197208607\").\n\n4. Create JSON output for each user with exact structure:\n{\n  \"receptor\": \"formatted phone number\",\n  \"message\": \"personalized SMS message\"\n}\n\n5. Aggregate all user JSON objects in a list.\n\n6. Send the list JSON as the output for SMS sending via SMS Node.\n\n7. Additionally, send a campaign report (including message status and details) to a Telegram channel or user in full text format.\n\nRules and Constraints:\n- SMS must be under 160 characters.\n- SMS must be in Persian and maintain a friendly tone per brand guide.\n- Output must be a single JSON list containing JSON objects per user.\n- No additional text, summary, or explanation outside the exact JSON output.\n- Phone numbers must be normalized with a leading zero.\n- Campaign goals to be recognized and message style adjusted accordingly.",
        "model": "gpt-4.1-mini",
        "ai_provider": "openai",
        "temperature": 1,
        "top_p": 1,
        "reasoning_effort": null,
        "hasCodeInterpreter": false,
        "hasDelaversInterpreter": false,
        "enable_web_search": false,
        "function_names": [],
        "assistant_type": "regular",
        "company_id": null,
        "hasExecutionCapability": false,
        "hasFunctions": false
      }
    },
    {
      "id": "telegram-1358",
      "type": "telegram",
      "position": {
        "x": 381.2650183433433,
        "y": 1389.6561146258023
      },
      "data": {
        "label": "SMS Marketing Bot"
      }
    },
    {
      "id": "googledoc-770",
      "type": "googledoc",
      "position": {
        "x": 990.2,
        "y": 709.302
      },
      "data": {
        "label": "SMS Marketing Guide",
        "doc_id": "",
        "doc_name": "راهنمای پیامک مارکتینگ",
        "operation_type": "read",
        "selected_documents": [],
        "function_config": {
          "document_sections": [],
          "document_description": "",
          "content_format": "plain_text",
          "max_content_length": 5000
        }
      }
    },
    {
      "id": "googlesheet-920",
      "type": "googlesheet",
      "position": {
        "x": 366.189,
        "y": 716.786
      },
      "data": {
        "label": "Customer Data",
        "sheet_id": "",
        "sheet_name": "دیتای مشتریان",
        "operation_type": "read",
        "selected_sheets": [],
        "function_config": {
          "default_range": "A1:Z1000",
          "header_row": 1,
          "column_definitions": [],
          "sheet_description": ""
        }
      }
    },
    {
      "id": "filedb-396",
      "type": "filedb",
      "position": {
        "x": 681.401,
        "y": 572.46
      },
      "data": {
        "label": "Inactive Customers Campaign"
      }
    },
    {
      "id": "trigger-895",
      "type": "trigger",
      "position": {
        "x": 455.412,
        "y": 1003
      },
      "data": {
        "label": "SMS Trigger",
        "scheduleType": "interval",
        "intervalValue": 5,
        "intervalUnit": "minutes",
        "cronExpression": "",
        "timezone": "Asia/Tehran",
        "messageTemplate": "",
        "contextData": {},
        "isActive": false
      }
    },
    {
      "id": "sms-209",
      "type": "sms",
      "position": {
        "x": 1071.7452182455986,
        "y": 1447.157870699523
      },
      "data": {
        "label": "SMS"
      }
    }
  ],
  "edges": [
    {
      "id": "eassistant-2160-telegram-1358",
      "source": "assistant-2160",
      "target": "telegram-1358"
    },
    {
      "id": "etrigger-895-assistant-2160",
      "source": "trigger-895",
      "target": "assistant-2160"
    },
    {
      "id": "eassistant-2160-sms-209",
      "source": "assistant-2160",
      "target": "sms-209"
    },
    {
      "id": "egooglesheet-920-assistant-2160-1762341756979",
      "source": "googlesheet-920",
      "target": "assistant-2160"
    },
    {
      "id": "eassistant-2160-filedb-396",
      "source": "filedb-396",
      "target": "assistant-2160"
    },
    {
      "id": "egoogledoc-770-assistant-2160-1762341772559",
      "source": "googledoc-770",
      "target": "assistant-2160"
    }
  ]
}