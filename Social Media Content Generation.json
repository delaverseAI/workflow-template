{
  "version": "1.0",
  "exportedAt": "2025-11-06T09:10:34.842Z",
  "nodes": [
    {
      "id": "assistant-2212",
      "type": "assistant",
      "position": {
        "x": 605.828,
        "y": 948.948
      },
      "data": {
        "label": "Social Content Generation AI Agent",
        "instructions": "You automatically generate Instagram caption content by reading input from a specified Google Sheet, producing caption content based on brand tone and style guidelines, updating status, and writing the output to a Google Doc. You also generate and store a relevant image in the gallery.\n\nData Sources:\n- Google Sheet ID: [Your Google Sheet ID]\n  - Columns:\n    - A: ID\n    - B: Content Title\n    - C: Content Context and Platform\n    - D: Publication Status (\"to_do\", \"done\")\n- Google Doc ID:  [Your Google Doc ID] for brand tone guidelines\n- File ID: [Your File Database ID] from file repository for writing style guidelines \nGoogle Doc and File are inside the Vector Store with [Your Vector Store ID]\n\nStep-by-Step Logic:\n\n1. Read Data from Google Sheet:\n   - Call read_google_sheet function.\n   - Find the first row where Column D is \"to_do\".\n   - If multiple such rows exist, select the one with the smallest ID.\n   - Store the row number.\n   - Extract the content title and content context/platform.\n\n2. Generate Social Content:\n   - Retrieve brand tone guidelines from Google Doc.\n   - Retrieve writing style guidelines from File.\n   - Generate Instagram captions and post content based on the title and content context/platform.\n   - Ensure the content strictly follows brand tone and style.\n\n3. Update Status:\n   - Call update_google_sheet to change the status of the processed row in Column D from \"to_do\" to \"done\".\n   - This must be done regardless of any errors.\n\n4. Generate Image:\n   - Create a relevant image for the content.\n   - Store the image in the gallery for later use.\n\n5. Output:\n   - Write the generated content (caption and post) fully into Google Doc with ID  [Your Google Doc ID] using write_google_doc.\n\nRules and Constraints:\n- Follow the exact sequence of steps.\n- Ensure data integrity and proper error handling.\n- Provide output in Persian, suitable for the Instagram audience.",
        "model": "gpt-4.1-mini",
        "ai_provider": "openai",
        "temperature": 1,
        "top_p": 1,
        "reasoning_effort": null,
        "hasCodeInterpreter": false,
        "hasDelaversInterpreter": false,
        "enable_web_search": false,
        "function_names": [],
        "assistant_type": "regular",
        "company_id": null,
        "hasExecutionCapability": false,
        "hasFunctions": false
      }
    },
    {
      "id": "telegram-1387",
      "type": "telegram",
      "position": {
        "x": 328.3498949416343,
        "y": 1260.61846692607
      },
      "data": {
        "label": "Social Bot"
      }
    },
    {
      "id": "googledoc-820",
      "type": "googledoc",
      "position": {
        "x": 787.9872178068698,
        "y": 415.2853312328521
      },
      "data": {
        "label": "Content Writing Guide",
        "doc_id": "",
        "doc_name": "راهنمای نگارش محتوا",
        "operation_type": "read",
        "selected_documents": [],
        "function_config": {
          "document_sections": [],
          "document_description": "",
          "content_format": "plain_text",
          "max_content_length": 5000
        }
      }
    },
    {
      "id": "googledoc-821",
      "type": "googledoc",
      "position": {
        "x": 976.0511596250365,
        "y": 659.5020686729929
      },
      "data": {
        "label": "Social Content Output",
        "doc_id": "",
        "doc_name": "خروجی محتوای سوشال",
        "operation_type": "read",
        "selected_documents": [],
        "function_config": {
          "document_sections": [],
          "document_description": "",
          "content_format": "plain_text",
          "max_content_length": 5000
        }
      }
    },
    {
      "id": "googlesheet-939",
      "type": "googlesheet",
      "position": {
        "x": 233.46023671120025,
        "y": 653.281918081235
      },
      "data": {
        "label": "Social Content Program",
        "sheet_id": "",
        "sheet_name": "برنامه محتوای سوشال",
        "operation_type": "read",
        "selected_sheets": [],
        "function_config": {
          "default_range": "A1:Z1000",
          "header_row": 1,
          "column_definitions": [],
          "sheet_description": ""
        }
      }
    },
    {
      "id": "filedb-414",
      "type": "filedb",
      "position": {
        "x": 443.78186766968724,
        "y": 309.1439747942261
      },
      "data": {
        "label": "Social Content Style"
      }
    },
    {
      "id": "trigger-920",
      "type": "trigger",
      "position": {
        "x": 818.6212150632185,
        "y": 636.2027731480354
      },
      "data": {
        "label": "Social Trigger",
        "scheduleType": "interval",
        "intervalValue": 5,
        "intervalUnit": "minutes",
        "cronExpression": "",
        "timezone": "Asia/Tehran",
        "messageTemplate": "",
        "contextData": {},
        "isActive": false
      }
    },
    {
      "id": "imagegeneration-330",
      "type": "imagegeneration",
      "position": {
        "x": 848.2265836575876,
        "y": 1247.340216113139
      },
      "data": {
        "label": "Image Generation"
      }
    }
  ],
  "edges": [
    {
      "id": "egoogledoc-821-assistant-2212",
      "source": "googledoc-821",
      "target": "assistant-2212"
    },
    {
      "id": "egooglesheet-939-assistant-2212",
      "source": "googlesheet-939",
      "target": "assistant-2212"
    },
    {
      "id": "etrigger-920-assistant-2212",
      "source": "trigger-920",
      "target": "assistant-2212"
    },
    {
      "id": "eassistant-2212-telegram-1387",
      "source": "assistant-2212",
      "target": "telegram-1387"
    },
    {
      "id": "eassistant-2212-imagegeneration-330",
      "source": "assistant-2212",
      "target": "imagegeneration-330"
    },
    {
      "id": "eassistant-2212-filedb-414",
      "source": "filedb-414",
      "target": "assistant-2212"
    },
    {
      "id": "egoogledoc-820-assistant-2212-1762420224549",
      "source": "googledoc-820",
      "target": "assistant-2212"
    }
  ]
}