{
  "version": "1.0",
  "exportedAt": "2025-11-05T13:16:09.007Z",
  "nodes": [
    {
      "id": "container-451",
      "type": "container",
      "position": {
        "x": -1064.3648286613031,
        "y": 601.3987933095395
      },
      "data": {
        "label": "Customer Behavior Analysis Container",
        "width": 1189,
        "height": 1315
      }
    },
    {
      "id": "assistant-2176",
      "type": "assistant",
      "position": {
        "x": 504.07165055557516,
        "y": 481.2629973100816
      },
      "data": {
        "label": "Customer Behavior Analysis and Sales Optimization AI Agent",
        "instructions": "You analyze customer behavior data to identify patterns, detect churn risks, and recommend complementary products to improve customer retention and increase sales.\nData Sources:\n- Google Doc ID  [Your Google Doc ID]: Contains customer reports data.\n- File Storage with Vector Store ID [Your File Storage IDs]: Contains customer tickets data.\n- Google Sheet ID [Your Google Sheet ID]: Contains customer data with columns:\n  A = Row number\n  B = First Name\n  C = Last Name\n  D = Phone Number\n  E = Email\n  F = City\n  G = Date of Birth\n  H = Gender\n  I = Date of Last Purchase\n  J = Last Purchase Amount\n  K = Loyalty Level\nData is statically stored in Vector Store [Your Vector Store ID].\nStep-by-Step Logic:\n1. Read customer reports from Google Doc.\n2. Read customer tickets data from Vector Store.\n3. Read customer data from Google Sheet.\n4. Perform behavioral analysis:\n   - Identify behavioral patterns and preferences (e.g., frequent purchase of product X).\n   - Categorize customers into segments such as loyal and occasional buyers.\n5. Calculate churn rate:\n   - Identify customers at risk of churn (e.g., decrease in purchase frequency, unresolved tickets).\n   - Estimate the probability of churn for these customers.\n6. Cross-sell analysis:\n   - Recommend complementary products/services (e.g., headphones for phone buyers).\n7. Detect issues:\n   - Identify bottlenecks like slow support responses.\n8. Provide actionable suggestions:\n   - Propose personalized offers (e.g., customized discounts) to retain customers and boost sales.\nOutput Formatting:\n- Generate a comprehensive customer behavior analysis report in Persian.\n- Use a professional and friendly tone.\n- Write a full text report formatted for readability.\n- Write the report into Google Doc with ID [Your Google Doc ID] using the write_google_doc function.\nRules and Constraints:\n- No summaries; full detailed analysis required.\n- Maintain clarity and professionalism.\n- Data privacy must be respected; no personal data exposure beyond internal processing.",
        "model": "gpt-4.1-mini",
        "ai_provider": "openai",
        "temperature": 1,
        "top_p": 1,
        "reasoning_effort": null,
        "hasCodeInterpreter": false,
        "hasDelaversInterpreter": false,
        "enable_web_search": false,
        "function_names": [],
        "assistant_type": "regular",
        "company_id": null,
        "hasExecutionCapability": false,
        "hasFunctions": false
      },
      "parentNode": "container-451",
      "extent": "parent"
    },
    {
      "id": "analyzer-2177",
      "type": "analyzer",
      "position": {
        "x": -595.9767671406026,
        "y": 1962.9851633890587
      },
      "data": {
        "label": "Customer Behavior Analyst",
        "instructions": "You are an AI assistant for comprehensive analysis of customer behavior based on assistant messages.\n\nYour goal is to generate key metrics, identify long-term trends, and provide suggestions for customer retention and increased sales. You will need to perform the following actions and analyses:\n- Key metrics: Bounce rate, average purchase value, engagement rate.\n- Periodic trends: Behavior changes (e.g., decrease in purchases) over months.\n- Problems: Bottlenecks (e.g., open support tickets).\n- Suggestions: Strategic solutions (e.g., personalized campaigns).\n- Generate output in text format for Telegram, with a professional and friendly tone.",
        "model": "gpt-4.1-mini",
        "ai_provider": "openai",
        "temperature": 1,
        "top_p": 1,
        "reasoning_effort": null,
        "hasCodeInterpreter": false,
        "hasDelaversInterpreter": false,
        "enable_web_search": false,
        "function_names": [],
        "assistant_type": "regular",
        "company_id": null,
        "hasExecutionCapability": false,
        "hasFunctions": false
      }
    },
    {
      "id": "telegram-1370",
      "type": "telegram",
      "position": {
        "x": 820.7358081095111,
        "y": 982.2764255925897
      },
      "data": {
        "label": "Customer Behavior Manager"
      },
      "parentNode": "container-451",
      "extent": "parent"
    },
    {
      "id": "googledoc-785",
      "type": "googledoc",
      "position": {
        "x": 161.4758006821288,
        "y": 121.17221340002914
      },
      "data": {
        "label": "Customer Reports",
        "doc_id": "",
        "doc_name": "گزارش‌های مشتری",
        "operation_type": "read",
        "selected_documents": [],
        "function_config": {
          "document_sections": [],
          "document_description": "",
          "content_format": "plain_text",
          "max_content_length": 5000
        }
      },
      "parentNode": "container-451",
      "extent": "parent"
    },
    {
      "id": "googledoc-786",
      "type": "googledoc",
      "position": {
        "x": 865.8618134303475,
        "y": 558.4641919963644
      },
      "data": {
        "label": "Customer Analysis Report",
        "doc_id": "",
        "doc_name": "گزارش تحلیل مشتری",
        "operation_type": "read",
        "selected_documents": [],
        "function_config": {
          "document_sections": [],
          "document_description": "",
          "content_format": "plain_text",
          "max_content_length": 5000
        }
      },
      "parentNode": "container-451",
      "extent": "parent"
    },
    {
      "id": "googlesheet-930",
      "type": "googlesheet",
      "position": {
        "x": 871.6060175231203,
        "y": 124.35107986963794
      },
      "data": {
        "label": "Customer Data",
        "sheet_id": "",
        "sheet_name": "داده‌های مشتری",
        "operation_type": "read",
        "selected_sheets": [],
        "function_config": {
          "default_range": "A1:Z1000",
          "header_row": 1,
          "column_definitions": [],
          "sheet_description": ""
        }
      },
      "parentNode": "container-451",
      "extent": "parent"
    },
    {
      "id": "iframe-414",
      "type": "iframe",
      "position": {
        "x": 79.49980810951104,
        "y": 854.6724527647439
      },
      "data": {
        "label": "Customer Behavior Frame"
      },
      "parentNode": "container-451",
      "extent": "parent"
    },
    {
      "id": "filedb-402",
      "type": "filedb",
      "position": {
        "x": 486.3367996623815,
        "y": 62.850322705913186
      },
      "data": {
        "label": "Customer Tickets"
      },
      "parentNode": "container-451",
      "extent": "parent"
    },
    {
      "id": "trigger-907",
      "type": "trigger",
      "position": {
        "x": 300.030916719718,
        "y": 365.0512603910863
      },
      "data": {
        "label": "Customer Behavior Analysis Trigger",
        "scheduleType": "interval",
        "intervalValue": 5,
        "intervalUnit": "minutes",
        "cronExpression": "",
        "timezone": "Asia/Tehran",
        "messageTemplate": "",
        "contextData": {},
        "isActive": false
      },
      "parentNode": "container-451",
      "extent": "parent"
    }
  ],
  "edges": [
    {
      "id": "eassistant-2176-telegram-1370",
      "source": "assistant-2176",
      "target": "telegram-1370"
    },
    {
      "id": "egoogledoc-786-assistant-2176",
      "source": "googledoc-786",
      "target": "assistant-2176"
    },
    {
      "id": "etrigger-907-assistant-2176",
      "source": "trigger-907",
      "target": "assistant-2176"
    },
    {
      "id": "econtainer-451-analyzer-2177",
      "source": "container-451",
      "target": "analyzer-2177"
    },
    {
      "id": "eassistant-2176-iframe-414",
      "source": "assistant-2176",
      "target": "iframe-414"
    },
    {
      "id": "eassistant-2176-filedb-402",
      "source": "filedb-402",
      "target": "assistant-2176"
    },
    {
      "id": "egooglesheet-930-assistant-2176-1762348545981",
      "source": "googlesheet-930",
      "target": "assistant-2176"
    },
    {
      "id": "egoogledoc-785-assistant-2176-1762348548084",
      "source": "googledoc-785",
      "target": "assistant-2176"
    }
  ]
}