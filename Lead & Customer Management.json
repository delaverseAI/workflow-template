{
  "version": "1.0",
  "exportedAt": "2025-11-05T10:45:56.144Z",
  "nodes": [
    {
      "id": "assistant-2153",
      "type": "assistant",
      "position": {
        "x": 434.802,
        "y": 770.693
      },
      "data": {
        "label": "Customer Lead AI Agent",
        "instructions": "You are an AI assistant for managing leads and customers. Your goal is to analyze customer data using the RFM (Recency, Frequency, Monetary) model and classify leads for prioritization.\nFollow the lead scoring guide from the file with the Google Doc ID [Your Google Doc ID]\nRetrieve customer data from the database file with the Google Sheet ID  [Your Google Sheet ID] in the vector database. Implement the RFM model based on the content of the file with the Google Doc File data. \nOnce the output for all users is prepared, follow these steps for the final output:\nBe sure to call the function write_google_sheet_* with the following values:\nwrite_google_sheet_*(\n    \"range\": \"Sheet1!A:E\",\n    \"values\": [\n        \"customer\": \"Customer Name\",\n        \"email\": \"Email\",\n        \"rfm_score\": \"RFM Score\",\n        \"category\": \"Category\",\n        \"phone\": \"Phone Number\",\n    ]\n)\nImportant: Do not provide any descriptions or explanations, only call the write_google_sheet_* function with the specified values and announce the result of the call.\nResult: The function write_google_sheet_* was called successfully with the provided values.\n",
        "model": "gpt-4.1-mini",
        "ai_provider": "openai",
        "temperature": 1,
        "top_p": 1,
        "reasoning_effort": null,
        "hasCodeInterpreter": false,
        "hasDelaversInterpreter": false,
        "enable_web_search": false,
        "function_names": [],
        "assistant_type": "regular",
        "company_id": null,
        "hasExecutionCapability": false,
        "hasFunctions": false
      }
    },
    {
      "id": "assistant-2154",
      "type": "assistant",
      "position": {
        "x": -188.09224095940965,
        "y": 781.03847601476
      },
      "data": {
        "label": "SMS Generation AI Agent",
        "instructions": "You are an AI assistant for generating personalized SMS messages. Your goal is to create marketing SMS based on customers' RFM data for purposes such as retention, repeat purchases, or promoting new products.\nImportant: Retrieve customer data by calling the read_google_sheet_* function and extract the columns customer, email, rfm_score, category, and phone from the Google Sheet, storing them as user information.\nFollow these steps after analysis:\nThe analysis must be performed for all users in the Google Sheet.\nBased on user information, generate an SMS for each user tailored to their category. For example:\nVIP: Encourage repeat purchases (e.g., \"Dear Ali, get 10% off your next purchase! ðŸ˜Š\").\nPotential: Encourage first purchase (e.g., \"Dear Sara, try our new product! ðŸŽ‰\").\nNeeds Attention: Re-engage the customer (e.g., \"Dear Mohammad, we miss you! Use code XYZ for 20% off.\").\nLoyal: Acknowledge loyal customers (e.g., \"Dear Mehran, thank you for staying with us.\").\nKeep SMS messages short (under 160 characters), in Persian, and with a friendly tone.\nAfter analyzing users based on their data, perform the following steps for each user:\nCreate a JSON output with this exact structure:\njson\n{\n  \"receptor\": \"phone number\",\n  \"message\": \"message\"\n}\nThe output must only be in JSON format, with no descriptions or analysis in the final output.\nDo not summarize the results in Persian or any other language. You must send the JSON output with the intended messages.\nImportant: The final result must be sent to Telegram.\nResult: The JSON output with personalized SMS messages for each user has been generated and sent to Telegram as requested.\n",
        "model": "gpt-4.1-mini",
        "ai_provider": "openai",
        "temperature": 1,
        "top_p": 1,
        "reasoning_effort": null,
        "hasCodeInterpreter": false,
        "hasDelaversInterpreter": false,
        "enable_web_search": false,
        "function_names": [],
        "assistant_type": "regular",
        "company_id": null,
        "hasExecutionCapability": false,
        "hasFunctions": false
      }
    },
    {
      "id": "telegram-1350",
      "type": "telegram",
      "position": {
        "x": 432.13598152376585,
        "y": 1090.7211640027497
      },
      "data": {
        "label": "Customer Lead Bot"
      }
    },
    {
      "id": "telegram-1351",
      "type": "telegram",
      "position": {
        "x": -73.53316661613438,
        "y": 1122.9131824789838
      },
      "data": {
        "label": "Customer Lead SMS"
      }
    },
    {
      "id": "googledoc-765",
      "type": "googledoc",
      "position": {
        "x": 620.472,
        "y": 200.302
      },
      "data": {
        "label": "Lead Score Guide",
        "doc_id": "",
        "doc_name": "Lead Score Guide",
        "operation_type": "read",
        "selected_documents": [],
        "function_config": {
          "document_sections": [],
          "document_description": "",
          "content_format": "plain_text",
          "max_content_length": 5000
        }
      }
    },
    {
      "id": "googlesheet-913",
      "type": "googlesheet",
      "position": {
        "x": 43.4936,
        "y": 495.134
      },
      "data": {
        "label": "RFM Report",
        "sheet_id": "",
        "sheet_name": "RFM Report",
        "operation_type": "read",
        "selected_sheets": [],
        "function_config": {
          "default_range": "A1:Z1000",
          "header_row": 1,
          "column_definitions": [],
          "sheet_description": ""
        }
      }
    },
    {
      "id": "googlesheet-914",
      "type": "googlesheet",
      "position": {
        "x": 264.7726633190335,
        "y": 194.72033668096654
      },
      "data": {
        "label": "Customer Data",
        "sheet_id": "",
        "sheet_name": "Customer Data",
        "operation_type": "read",
        "selected_sheets": [],
        "function_config": {
          "default_range": "A1:Z1000",
          "header_row": 1,
          "column_definitions": [],
          "sheet_description": ""
        }
      }
    },
    {
      "id": "trigger-888",
      "type": "trigger",
      "position": {
        "x": 758.845,
        "y": 591.507
      },
      "data": {
        "label": "Lead Trigger",
        "scheduleType": "interval",
        "intervalValue": 5,
        "intervalUnit": "minutes",
        "cronExpression": "",
        "timezone": "Asia/Tehran",
        "messageTemplate": "",
        "contextData": {},
        "isActive": false
      }
    },
    {
      "id": "trigger-889",
      "type": "trigger",
      "position": {
        "x": -90.40576752767535,
        "y": 588.678952398524
      },
      "data": {
        "label": "SMS Trigger",
        "scheduleType": "interval",
        "intervalValue": 5,
        "intervalUnit": "minutes",
        "cronExpression": "",
        "timezone": "Asia/Tehran",
        "messageTemplate": "",
        "contextData": {},
        "isActive": false
      }
    },
    {
      "id": "sms-206",
      "type": "sms",
      "position": {
        "x": -419.32183505053445,
        "y": 1077.6360989838754
      },
      "data": {
        "label": "SMS"
      }
    }
  ],
  "edges": [
    {
      "id": "eassistant-2153-telegram-1350",
      "source": "assistant-2153",
      "target": "telegram-1350"
    },
    {
      "id": "etrigger-888-assistant-2153",
      "source": "trigger-888",
      "target": "assistant-2153"
    },
    {
      "id": "etrigger-889-assistant-2154",
      "source": "trigger-889",
      "target": "assistant-2154"
    },
    {
      "id": "eassistant-2154-telegram-1351",
      "source": "assistant-2154",
      "target": "telegram-1351"
    },
    {
      "id": "eassistant-2154-sms-206",
      "source": "assistant-2154",
      "target": "sms-206"
    },
    {
      "id": "egooglesheet-913-assistant-2153",
      "source": "googlesheet-913",
      "target": "assistant-2153"
    },
    {
      "id": "egooglesheet-913-assistant-2154",
      "source": "googlesheet-913",
      "target": "assistant-2154"
    },
    {
      "id": "egoogledoc-765-assistant-2153",
      "source": "googledoc-765",
      "target": "assistant-2153"
    },
    {
      "id": "egooglesheet-914-assistant-2153",
      "source": "googlesheet-914",
      "target": "assistant-2153"
    }
  ]
}