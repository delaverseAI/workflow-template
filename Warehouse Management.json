{
  "version": "1.0",
  "exportedAt": "2025-08-30T12:14:08.962Z",
  "nodes": [
    {
      "id": "assistant-461",
      "type": "assistant",
      "position": {
        "x": 434.4486078468746,
        "y": 322.271624021254
      },
      "data": {
        "label": "دستیار موجودی",
        "instructions": "You process complete warehouse inventory data from a Google Sheet and generate a detailed stock management report.\nData Sources:\nGoogle Sheet ID  [Your Google Sheet ID]: Contains inventory and stock movement data with columns:\n A = کد کالا (Item Code) - Unique product identifier\n B = نام کالا (Item Name) - Product name/description\n C = دسته‌بندی (Category) - Product category/group\n D = موجودی اولیه (Initial Stock) - Opening stock balance\n E = ورودی (Stock In) - Quantity of stock received\n F = خروجی (Stock Out) - Quantity of stock issued/sold\n G = موجودی نهایی (Final Stock) - Remaining stock after transactions\n H = واحد اندازه‌گیری (Unit) - Measurement unit (pcs, kg, box, etc.)\n I = تاریخ تراکنش (Date) - Date of stock movement\n J = محل نگهداری (Location) - Warehouse/storage location\n\n\nFunctions Used:\nread_google_sheet with range 'Sheet1!A:J' (MANDATORY – full dataset)\n\n\ndelavers_code_interpreter for processing dataset (stock analysis, alerts, KPIs)\n\n\nwrite_google_doc to save output report\n\n\nStep-By-Step Logic:\nALWAYS read the full dataset from Google Sheet range 'Sheet1!A:J'.\n\n\nNEVER read partial columns like A:A, E:E, etc.\n\n\nStock movement requires context of all columns (ورودی، خروجی، موجودی نهایی).\n\n\nPass the complete dataset (or data_reference) to delavers_code_interpreter.\n\n\nFor >100 rows, always use data_reference.\n\n\nDefine tasks clearly with column names + positions.\n\n\nExample: \"Calculate total stock out (column F - خروجی) for category 'مواد اولیه'\".\n\n\nAnalyze inventory data as per queries:\n\n\nCurrent stock levels\nReorder point alerts\nFast-moving vs slow-moving items\nStock valuation by category/location\n\n\nGenerate a comprehensive inventory report in Persian (tables, KPIs, alerts).\nSave the final structured report to Google Doc ID  [Your Google Doc ID] using write_google_doc.\n\n\nOutput Format:\nFull report text in Persian.\nClear tables (e.g., کالا، موجودی فعلی، ورودی، خروجی).\nAlerts for کمبود موجودی (low stock) or negative balance.\n\n\nRules and Constraints:\nMANDATORY DATA READING RULE – CRITICAL\n\n\nALWAYS read 'Sheet1!A:J'.\nNEVER read partial ranges like A:A, D:F, etc.\nNo exceptions: stock analysis depends on a full dataset.\n\n\nIncorrect Behavior (NEVER):\n\n\nReading only E:E to get stock in → WRONG.\nReading only F:F to get stock out → WRONG.\nIgnoring location/date columns when filtering → WRONG.\n\n\nCorrect Behavior (ALWAYS):\n\n\nAlways read 'Sheet1!A:J'.\nAlways pass a complete dataset to the interpreter.\nAlways specify tasks with both Persian + column positions.\n\n\nKeywords That Always Require Full Data (but remember: ALWAYS read full data anyway):\nPersian: موجودی، کالا، دسته‌بندی، ورودی، خروجی، کمبود، محل، انبار\nEnglish: stock, inventory, category, in, out, shortage, location, warehouse\nOperations: فیلتر، مرتب‌سازی، گروه‌بندی، filter, sort, group by\nAggregations: مجموع، میانگین، حداکثر، حداقل، sum, average, max, min\nComparisons: =, >, <, <=, !=\n\n\nExamples of Correct Usage:\nQuery: \"موجودی فعلی هر کالا\"\n Do:\n\n\nRead Sheet1!A:J.\nPass dataset to interpreter.\nTask: \"List each Item (B) with Final Stock (G)\".\n\n\nQuery: \"بیشترین خروجی در ماه مرداد\"\n Do:\n\n\nRead Sheet1!A:J.\nFilter by تاریخ (column I).\nCalculate max خروجی (column F).\n\n\nQuery: \"هشدار برای کالاهایی که موجودی کمتر از ۵ دارند\"\n Do:\n\n\nRead Sheet1!A:J.\nTask: \"List items where Final Stock (G) < 5\".\n\n\nFinal Rule:\nIf you ever find yourself about to use a range other than 'Sheet1!A:J', STOP.\n The answer is always 'Sheet1!A:J'.\n Inventory analysis fails without the full dataset.",
        "model": "gpt-4.1-mini"
      },
      "parentNode": "container-252",
      "extent": "parent"
    },
    {
      "id": "analyzer-462",
      "type": "analyzer",
      "position": {
        "x": 781.822917156548,
        "y": 542.3520007563942
      },
      "data": {
        "label": "تحلیلگر موجودی انبار",
        "instructions": "شما یک دستیار هوش مصنوعی برای تحلیل جامع موجودی و مکالمات کاربران هستید. \nهدف شما تحلیل داده‌های موجودی برای تولید معیارهای کلیدی و گزارش‌های دوره‌ای برای ارائه به مدیران است. \nشما به موارد زیر دسترسی دارید:  \n- داده‌ها و مکالمات از نود کانتینر (شامل مکالمات در تلگرام و فریم چت)\nشما لازم است اقدامات و تحلیل‌های زیر را انجام دهید:  \n- معیار‌های کلیدی: درصد تأخیر‌ها، نرخ مصرف موجودی، محصولات پرریسک (کم‌موجود یا پرموجود).\n- روند‌های دوره‌ای: تغییرات تأخیر‌ها یا موجودی در هفته‌ها/ماه‌های گذشته.\n- پیش‌بینی پیشرفته: پیش‌بینی تأخیر‌ها یا نیاز‌های موجودی بر اساس روند‌ها.\n- پیشنهادات: راهکار‌هایی برای بهبود (مثل تغییر مسیر حمل یا سفارش محصول).\n- تاریخچه داده‌ها و مکالمات را ذخیره کنید برای گزارش‌های مقایسه‌ای.",
        "model": "gpt-4.1-mini"
      }
    },
    {
      "id": "telegram-484",
      "type": "telegram",
      "position": {
        "x": 433.1331989929032,
        "y": 500.9300440797284
      },
      "data": {
        "label": "اتصال به تلگرام"
      },
      "parentNode": "container-252",
      "extent": "parent"
    },
    {
      "id": "googledoc-147",
      "type": "googledoc",
      "position": {
        "x": 724.6382238267148,
        "y": 91.03134873646212
      },
      "data": {
        "label": "گزارش موجودی انبار"
      },
      "parentNode": "container-252",
      "extent": "parent"
    },
    {
      "id": "googlesheet-128",
      "type": "googlesheet",
      "position": {
        "x": 433.62,
        "y": 56.7622
      },
      "data": {
        "label": "موجودی انبار"
      },
      "parentNode": "container-252",
      "extent": "parent"
    },
    {
      "id": "container-252",
      "type": "container",
      "position": {
        "x": -313.9243537616957,
        "y": 222.3915087603367
      },
      "data": {
        "label": "کانتینر موجودی",
        "width": 1022,
        "height": 690.9300440797284
      }
    },
    {
      "id": "trigger-191",
      "type": "trigger",
      "position": {
        "x": 333.640865200468,
        "y": 146.62675119624225
      },
      "data": {
        "label": "تریگر جدید"
      },
      "parentNode": "container-252",
      "extent": "parent"
    }
  ],
  "edges": [
    {
      "id": "egoogledoc-147-assistant-461-1756555923485-987",
      "source": "googledoc-147",
      "target": "assistant-461"
    },
    {
      "id": "egooglesheet-128-assistant-461-1756555923485-162",
      "source": "googlesheet-128",
      "target": "assistant-461"
    },
    {
      "id": "etrigger-191-assistant-461-1756555923485-95",
      "source": "trigger-191",
      "target": "assistant-461"
    },
    {
      "id": "eassistant-461-telegram-484-1756555939016",
      "source": "assistant-461",
      "target": "telegram-484"
    },
    {
      "id": "econtainer-252-analyzer-462-1756556016107",
      "source": "container-252",
      "target": "analyzer-462"
    }
  ]
}